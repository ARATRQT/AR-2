<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cognitive Assessment</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet"/>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #fff;
      color: #333;
      padding: 10px;
      text-align: center;
    }
    main { max-width: 800px; margin: 0 auto; padding: 20px; }
    .container {
      background-color: #f9f9f9; 
      border-radius: 10px;
      padding: 20px; 
      margin-bottom: 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    h2 { margin-bottom: 15px; color: #32CD32; }
    label { display: block; margin: 10px 0 5px; font-weight: 600; }
    input[type="number"],
    input[type="text"],
    select {
      width: 80%; max-width: 300px; padding: 8px; margin-bottom: 10px;
      border: 1px solid #ccc; border-radius: 5px; text-align: center;
    }
    button {
      background-color: #32CD32; color: #fff; border: none;
      border-radius: 5px; padding: 12px 20px; font-size: 1rem;
      cursor: pointer; margin: 10px 5px;
      transition: background-color 0.3s;
    }
    button:hover { background-color: #2cab2c; }
    button:disabled { background-color: #ccc; cursor: not-allowed; }
    .hidden { display: none; }
    .lang-btn[disabled] { opacity: 0.5; cursor: not-allowed; }
    .coming-soon { font-size: 0.8rem; color: #999; }
    .discounting-form label { font-weight: 600; margin-top: 10px; }
    .discounting-form input { margin-bottom: 15px; }
    #playBtn, #replayBtn, #submitBtn { min-width: 120px; padding: 12px 20px; }
    @media (max-width: 600px) {
      main { padding: 10px; }
      input, select { width: 100%; }
      button { padding: 10px 16px; font-size: 0.9rem; }
    }
    .discount-header { margin-bottom: 20px; }
    .discount-instructions {
      max-width: 600px;
      margin: 0 auto 25px auto;
      line-height: 1.5;
    }
  </style>
</head>
<body>
<main>
  <!-- Language Selection -->
  <div id="languageSelection" class="container">
    <h2 id="langTitle">Select Language</h2>
    <button id="btnEnglish">English</button>
    <button id="btnRussian">Русский</button>
    <!-- Other languages disabled -->
  </div>

  <!-- Demographics -->
  <div id="demographics" class="container hidden">
    <!-- Demographics form unchanged -->
  </div>

  <!-- Instructions -->
  <div id="instructionsPage" class="container hidden">
    <!-- Instructions content unchanged -->
  </div>

  <!-- Pre-Test Discounting ($1000) -->
  <div id="discountingPre" class="container hidden">
    <h2 id="discountingPreTitle"></h2>
    <div class="discount-header">
      <p id="discountingPreText" class="discount-instructions"></p>
    </div>
    <form id="discountingPreForm" class="discounting-form">
      <label for="pre1week" id="pre1weekLabel">After 1 week:</label>
      <input type="number" id="pre1week" name="pre1week" required placeholder="Enter amount" />
      
      <label for="pre2weeks" id="pre2weeksLabel">After 2 weeks:</label>
      <input type="number" id="pre2weeks" name="pre2weeks" required placeholder="Enter amount" />
      
      <label for="pre1month" id="pre1monthLabel">After 1 month:</label>
      <input type="number" id="pre1month" name="pre1month" required placeholder="Enter amount" />
      
      <label for="pre3months" id="pre3monthsLabel">After 3 months:</label>
      <input type="number" id="pre3months" name="pre3months" required placeholder="Enter amount" />
      
      <label for="pre1year" id="pre1yearLabel">After 1 year:</label>
      <input type="number" id="pre1year" name="pre1year" required placeholder="Enter amount" />
      
      <label for="pre5years" id="pre5yearsLabel">After 5 years:</label>
      <input type="number" id="pre5years" name="pre5years" required placeholder="Enter amount" />
      
      <button type="submit" id="submitDiscountingPre">Continue</button>
    </form>
  </div>

  <!-- Arithmetic Test -->
  <div id="testContainer" class="container hidden">
    <!-- Test interface unchanged -->
  </div>

  <!-- Post-Test Discounting ($2500) -->
  <div id="discountingPost" class="container hidden">
    <h2 id="discountingPostTitle"></h2>
    <div class="discount-header">
      <p id="discountingPostText" class="discount-instructions"></p>
    </div>
    <form id="discountingPostForm" class="discounting-form">
      <label for="post1week" id="post1weekLabel">After 1 week:</label>
      <input type="number" id="post1week" name="post1week" required placeholder="Enter amount" />
      
      <!-- Other post-test fields same structure as pre-test -->
      
      <button type="submit" id="submitDiscountingPost">Continue</button>
    </form>
  </div>

  <!-- Other sections unchanged -->
</main>

<script>
  const translations = {
    en: {
      discountPreTitle: "Financial Preferences Questionnaire",
      discountPreText: "If you were offered <strong>$1000 today</strong>, what is the minimum amount you would need to be offered at these future dates to consider waiting instead of taking the money now?",
      discountPostTitle: "Follow-up Financial Preferences",
      discountPostText: "If the amount available today was <strong>$2500</strong>, what minimum amounts would you need at these future dates to consider waiting?",
      timeLabels: ["1 week", "2 weeks", "1 month", "3 months", "1 year", "5 years"],
      placeholders: {
        discount: "Enter amount"
      }
    },
    ru: {
      discountPreTitle: "Опрос финансовых предпочтений",
      discountPreText: "Если бы вам предложили <strong>1000 долларов сегодня</strong>, какая минимальная сумма потребовалась бы вам через указанные сроки, чтобы вы согласились подождать вместо получения денег сейчас?",
      discountPostTitle: "Дополнительный опрос предпочтений",
      discountPostText: "Если бы доступная сегодня сумма составляла <strong>2500 долларов</strong>, какие минимальные суммы потребовались бы вам через указанные сроки для согласия на ожидание?",
      timeLabels: ["1 неделя", "2 недели", "1 месяц", "3 месяца", "1 год", "5 лет"],
      placeholders: {
        discount: "Введите сумму"
      }
    }
  };

  // Enhanced translation handler
  function applyTranslations() {
    const t = translations[selectedLanguage];
    
    // Discounting Pre
    document.getElementById("discountingPreTitle").innerHTML = t.discountPreTitle;
    document.getElementById("discountingPreText").innerHTML = t.discountPreText;
    
    // Discounting Post
    document.getElementById("discountingPostTitle").innerHTML = t.discountPostTitle;
    document.getElementById("discountingPostText").innerHTML = t.discountPostText;

    // Update time labels and placeholders
    const timeLabels = t.timeLabels;
    ['pre1weekLabel', 'pre2weeksLabel', 'pre1monthLabel', 
     'pre3monthsLabel', 'pre1yearLabel', 'pre5yearsLabel'].forEach((id, index) => {
      document.getElementById(id).textContent = `${timeLabels[index]}:`;
    });

    document.querySelectorAll('.discounting-form input[type="number"]').forEach(input => {
      input.placeholder = t.placeholders.discount;
    });
  }

  // Rest of the JavaScript remains the same with proper DOM handling
  // Ensure all discounting form elements are properly referenced
  // and transitions between sections work correctly

  // Initialize with proper translations
  window.onload = function() {
    applyTranslations();
    populateSexOptions(translations.en.sexOptions);
  };
</script>
</body>
</html>
